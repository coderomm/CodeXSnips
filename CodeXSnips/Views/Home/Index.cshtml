@model CodeXSnips.Models.ViewModels.AllVM

@{
    ViewData["Title"] = "Home Page";
}


<!-- create status -->
<div class="hidden lg:p-20" id="create-status" uk-modal="">

    <div class="uk-modal-dialog tt relative overflow-hidden mx-auto bg-white p-7 shadow-xl rounded-lg md:w-[520px] w-full dark:bg-dark2">

        <div class="text-center py-3 border-b -m-7 mb-0 dark:border-slate-700">
            <h2 class="text-sm font-medium"> Create Story </h2>

            <!-- close button -->
            <button type="button" class="button__ico absolute top-0 right-0 m-2.5 uk-modal-close">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </div>
        <div class="space-y-5 mt-7">
            <form asp-controller="UserAction" asp-action="CreateStory" method="post" class="mt-6" enctype="multipart/form-data">
                <div>
                    <label for="Content" class="text-base">Create your story here!</label>
                    <input asp-for="@Model.StoryVM.Content" id="Content" class="w-full mt-3" />
                    <span asp-validation-for="@Model.StoryVM.Content" class="text-danger"></span>
                </div>

                <div class="mt-4">
                    <div class="w-full h-72 relative border-1 rounded-lg overflow-hidden bg-[url('~/assets/images/ad_pattern.png')] bg-repeat">
                        <label for="MediaFile" class="flex flex-col justify-center items-center absolute -translate-x-1/2 left-1/2 bottom-0 z-10 w-full pb-6 pt-10 cursor-pointer bg-gradient-to-t from-gray-700/60">
                            <input type="file" asp-for="@Model.StoryVM.MediaFile" id="MediaFile" class="hidden" />
                            <ion-icon name="image" class="text-3xl text-teal-600"></ion-icon>
                            <span class="text-white mt-2">Browse to Upload Media</span>
                        </label>
                        <img id="createStatusImage" src="#" alt="Uploaded Media" style="display:none;" class="w-full h-full absolute object-cover">
                    </div>
                </div>

                <div class="flex justify-between items-center mt-4">
                    <div class="flex items-start gap-2">
                        <ion-icon name="time-outline" class="text-3xl text-sky-600 rounded-full bg-blue-50 dark:bg-transparent"></ion-icon>
                        <p class="text-sm text-gray-500 font-medium">Your Status will be available for <span class="text-gray-800">24 Hours</span></p>
                    </div>
                    <button type="submit" class="button bg-blue-500 text-white px-8">Create</button>
                </div>
            </form>

        </div>
    </div>
</div>

<!-- create post modal -->
<div class="lg:p-20 max-lg:!items-start" id="create-post" uk-modal="">

    <div class="uk-modal-dialog tt relative mx-auto bg-white shadow-xl rounded-lg max-lg:w-full dark:bg-dark2">
        <form asp-controller="UserAction" asp-action="CreateCodeSnippet" class="row" method="post" enctype="multipart/form-data">
            <!-- This is a switcher for multiple tabs. Each switcher tab should have the same number of tabs. https://getuikit.com/docs/switcher-->
            <ul class="" uk-switcher="connect: .posTabs">

                <!-- tab 1 -->
                <li><a href="#">Close</a></li>

                <!-- tab 2 -->
                <li><a href="#">Setting</a></li>

            </ul>

            <!-- card header -->
            <ul class="uk-switcher posTabs p-3.5 border-b text-center text-sm font-semibold text-black dark:text-white dark:border-slate-700">

                <!-- tab 1 -->
                <li>
                    <div> Upload file</div>
                    <a href="#" class="absolute top-0 m-3 right-1 text-blue-600" uk-switcher-item="next"> Next</a>
                </li>

                <!-- tab 2 -->
                <li>
                    <a href="#" class="absolute top-0 m-3.5 left-0" uk-switcher-item="previous">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18" /></svg>
                    </a>
                    <div> Premission Photo </div>

                    <!-- submit button -->
                    <button type="submit" class="text-white bg-blue-600 rounded-lg py-1.5 px-5 text-sm absolute top-0 m-2.5 right-0 uk-animation-slide-right-small"> Share </button>
                </li>

            </ul>

            <div class="lg:inline-flex">

                <div class="col-12 col-sm-6">
                    <!-- photo upload -->
                    <div class="lg:w-[400px] w-full">

                        <div class="w-full lg:h-[450px] h-80 relative overflow-hidden flex justify-center items-center">

                            <label for="addPostUrl" class="w-full h-full absolute inset-0 z-10 hover: cursor-pointer">
                                <input asp-for="@Model.CodeSnippetVM.MediaFile" id="addPostUrl" type="file" class="hidden" />
                                <span class="text-danger" asp-validation-for="@Model.CodeSnippetVM.MediaFile"></span>
                            </label>

                            <div class="space-y-4 absolute flex flex-col justify-center" uk-scrollspy="target: > div; cls: uk-animation-scale-up; delay: 300;repeat:true">

                                <div uk-scrollspy-class="uk-animation-scale-up">
                                    <svg class="mx-auto text-gray-600 dark:text-white" width="96" height="77" role="img" viewBox="0 0 97.6 77.3"><path d="M16.3 24h.3c2.8-.2 4.9-2.6 4.8-5.4-.2-2.8-2.6-4.9-5.4-4.8s-4.9 2.6-4.8 5.4c.1 2.7 2.4 4.8 5.1 4.8zm-2.4-7.2c.5-.6 1.3-1 2.1-1h.2c1.7 0 3.1 1.4 3.1 3.1 0 1.7-1.4 3.1-3.1 3.1-1.7 0-3.1-1.4-3.1-3.1 0-.8.3-1.5.8-2.1z" fill="currentColor"></path><path d="M84.7 18.4 58 16.9l-.2-3c-.3-5.7-5.2-10.1-11-9.8L12.9 6c-5.7.3-10.1 5.3-9.8 11L5 51v.8c.7 5.2 5.1 9.1 10.3 9.1h.6l21.7-1.2v.6c-.3 5.7 4 10.7 9.8 11l34 2h.6c5.5 0 10.1-4.3 10.4-9.8l2-34c.4-5.8-4-10.7-9.7-11.1zM7.2 10.8C8.7 9.1 10.8 8.1 13 8l34-1.9c4.6-.3 8.6 3.3 8.9 7.9l.2 2.8-5.3-.3c-5.7-.3-10.7 4-11 9.8l-.6 9.5-9.5 10.7c-.2.3-.6.4-1 .5-.4 0-.7-.1-1-.4l-7.8-7c-1.4-1.3-3.5-1.1-4.8.3L7 49 5.2 17c-.2-2.3.6-4.5 2-6.2zm8.7 48c-4.3.2-8.1-2.8-8.8-7.1l9.4-10.5c.2-.3.6-.4 1-.5.4 0 .7.1 1 .4l7.8 7c.7.6 1.6.9 2.5.9.9 0 1.7-.5 2.3-1.1l7.8-8.8-1.1 18.6-21.9 1.1zm76.5-29.5-2 34c-.3 4.6-4.3 8.2-8.9 7.9l-34-2c-4.6-.3-8.2-4.3-7.9-8.9l2-34c.3-4.4 3.9-7.9 8.4-7.9h.5l34 2c4.7.3 8.2 4.3 7.9 8.9z" fill="currentColor"></path><path d="M78.2 41.6 61.3 30.5c-2.1-1.4-4.9-.8-6.2 1.3-.4.7-.7 1.4-.7 2.2l-1.2 20.1c-.1 2.5 1.7 4.6 4.2 4.8h.3c.7 0 1.4-.2 2-.5l18-9c2.2-1.1 3.1-3.8 2-6-.4-.7-.9-1.3-1.5-1.8zm-1.4 6-18 9c-.4.2-.8.3-1.3.3-.4 0-.9-.2-1.2-.4-.7-.5-1.2-1.3-1.1-2.2l1.2-20.1c.1-.9.6-1.7 1.4-2.1.8-.4 1.7-.3 2.5.1L77 43.3c1.2.8 1.5 2.3.7 3.4-.2.4-.5.7-.9.9z" fill="currentColor"></path></svg>
                                </div>
                                <div class=" mx-auto" uk-scrollspy-class="uk-animation-slide-bottom-small">
                                    <button type="button" class="text-white bg-blue-600 rounded-lg py-1.5 px-4 text-sm dark:bg-white/5"> Select from the Device</button>
                                </div>

                            </div>

                            <img id="addPostImage" src="#" alt="Uploaded Image" style="display:none;" class="w-full h-full absolute object-cover fff">

                        </div>
                    </div>
                </div>
                <div class="col-12 col-sm-6">
                    <!-- right sidebar -->
                    <div class="relative w-auto border-l dark:border-slate-700">

                        <ul class="uk-switcher posTabs">

                            <!-- tab 1 -->
                            <li>  </li>

                            <!-- tab 2 Premission Photo-->
                            <li>

                                <div class="lg:w-[300px] lg:max-h-[600px] overflow-y-auto uk-animation-fade">

                                    <textarea asp-for="@Model.CodeSnippetVM.Content" rows="4" placeholder="What is going on.." class="w-full !p-4 !rounded-none"></textarea>

                                    <ul class="divide-y divide-gray-100 dark:divide-slate-700" uk-nav="multiple: true">

                                        <li>

                                            <div class="flex items-center justify-between py-2 px-3.5">
                                                <input type="text" placeholder="Add locations" class="font-medium text-sm w-full !bg-transparent !px-0 focus:!border-transparent focus:!ring-transparent">
                                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                                    <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z" />
                                                    <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z" />
                                                </svg>
                                            </div>

                                        </li>

                                        <li class="uk-parent uk-open">
                                            <a href="#" class="flex items-center justify-between py-2 px-3.5 group " aria-expanded="true">
                                                <h4 class="font-medium text-sm"> Accessibility</h4>
                                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 group-aria-expanded:rotate-180 duration-200">
                                                    <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 15.75l7.5-7.5 7.5 7.5" />
                                                </svg>
                                            </a>
                                            <ul class="-space-y-1">
                                                <li>
                                                    <div class="p-4">
                                                        <p class="text-[13px] font-light">  Alt text helps people with visual impairments understand your photos.</p>
                                                        <input type="text" placeholder="Write alt text.." class="w-full mt-3">
                                                    </div>
                                                </li>
                                            </ul>

                                        </li>

                                        <li class="uk-parent uk-open">
                                            <a href="#" class="flex items-center justify-between py-2 px-3.5 group " aria-expanded="true">
                                                <h4 class="font-medium text-sm"> Advanced settings</h4>
                                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 group-aria-expanded:rotate-180 duration-200">
                                                    <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 15.75l7.5-7.5 7.5 7.5" />
                                                </svg>
                                            </a>
                                            <ul class="-space-y-2">
                                                <li>
                                                    <div class="p-4">
                                                        <label class="switch flex justify-between items-start gap-4 cursor-pointer min-h-[30px]">
                                                            <div>
                                                                <h4 class="font-medium text-sm"> Hide like and view counts on this post</h4>
                                                            </div>
                                                            <input type="checkbox" checked><span class="switch-button !relative shrink-0"></span>
                                                        </label>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="p-4">
                                                        <label class="switch flex justify-between items-start gap-4 cursor-pointer min-h-[30px]">
                                                            <div>
                                                                <h4 class="font-medium text-sm"> Turn off commenting </h4>
                                                            </div>
                                                            <input type="checkbox" checked><span class="switch-button !relative shrink-0"></span>
                                                        </label>
                                                    </div>
                                                </li>
                                            </ul>

                                        </li>

                                    </ul>

                                </div>

                            </li>

                        </ul>

                    </div>
                </div>

            </div>
        </form>
    </div>

</div>
<main class="2xl:ml-[--w-side] xl:ml-[--w-side-md] md:ml-[--w-side-small]">

    <div class="main__inner">

        <!-- stories -->
        <div>
            <h3 class="font-extrabold text-2xl  text-black dark:text-white"> Stories</h3>
            <div class="relative" tabindex="-1" uk-slider="autoplay: true;finite: true" uk-lightbox="">
                <div class="py-5 uk-slider-container">
                    <ul class="uk-slider-items w-[calc(100%+14px)]" uk-scrollspy="target: > li; cls: uk-animation-scale-up; delay: 20;repeat:true">
                        <li class="md:pr-3" uk-scrollspy-class="uk-animation-fade">
                            <div class="md:w-20 md:h-20 w-12 h-12 rounded-full relative border-2 border-dashed grid place-items-center bg-slate-200 border-slate-300 dark:border-slate-700 dark:bg-dark2">
                                <ion-icon name="camera" class="text-2xl"></ion-icon>
                            </div>
                        </li>
                        @foreach (var story in Model.StoryList)
                        {
                            <li class="md:pr-2.5 pr-2 hover:scale-[1.15] hover:-rotate-2 duration-300">
                                <a href="@story.MediaPath" data-caption="@story.Content">
                                    <div class="md:w-20 md:h-20 w-12 h-12 relative md:border-4 border-2 shadow border-white rounded-full overflow-hidden dark:border-slate-700">
                                        @if (!string.IsNullOrEmpty(story.MediaPath))
                                        {
                                            var extension = System.IO.Path.GetExtension(story.MediaPath);
                                            if (extension.Equals(".mp4", StringComparison.OrdinalIgnoreCase) || extension.Equals(".avi", StringComparison.OrdinalIgnoreCase))
                                            {
                                                <video autoplay muted loop style="width:100%;height:100%">
                                                    <source src="@story.MediaPath" type="video/mp4">
                                                    Your browser does not support the video tag.
                                                </video>
                                                @* <img src="@story.User.ProfileImage" alt="" class="absolute w-full h-full object-cover"> *@

                                            }
                                            else if (extension.Equals(".jpg", StringComparison.OrdinalIgnoreCase) || extension.Equals(".png", StringComparison.OrdinalIgnoreCase) || extension.Equals(".jpeg", StringComparison.OrdinalIgnoreCase))
                                            {
                                                <img src="@story.MediaPath" alt="" class="absolute w-full h-full object-cover">
                                            }
                                            else
                                            {
                                                <p>Unsupported file type</p>
                                            }
                                        }
                                        else
                                        {
                                            <p>No file path available</p>
                                        }
                                    </div>
                                </a>
                            </li>
                        }
                        <li class="md:pr-2.5 pr-2">
                            <div class="md:w-20 md:h-20 w-12 h-12 bg-slate-200/60 rounded-full dark:bg-dark2 animate-pulse"></div>
                        </li>
                    </ul>
                </div>

                <div class="max-md:hidden">
                    <button type="button" class="absolute -translate-y-1/2 bg-white shadow rounded-full top-1/2 -left-3.5 grid w-8 h-8 place-items-center dark:bg-dark3" uk-slider-item="previous"> <ion-icon name="chevron-back" class="text-2xl"></ion-icon></button>
                    <button type="button" class="absolute -right-2 -translate-y-1/2 bg-white shadow rounded-full top-1/2 grid w-8 h-8 place-items-center dark:bg-dark3" uk-slider-item="next"> <ion-icon name="chevron-forward" class="text-2xl"></ion-icon> </button>
                </div>

            </div>
        </div>

        <div class="flex max-lg:flex-col xl:gap-10 md:gap-3 md:mt-10" id="js-oversized">

            <!-- feed story -->
            <div class="md:max-w-[510px] mx-auto flex-1 xl:space-y-6 space-y-3">
                <!-- add story -->
                <div class="bg-white rounded-xl shadow-sm p-4 space-y-4 text-sm font-medium border1 dark:bg-dark2">
                    <div class="flex items-center gap-3">
                        <div class="flex-1 bg-slate-100 hover:bg-opacity-80 transition-all rounded-lg cursor-pointer dark:bg-dark3" uk-toggle="target: #create-status">
                            <div class="py-2.5 text-center dark:text-white"> Create your story here! </div>
                        </div>
                        <div class="p-2 bg-sky-100 hover:bg-opacity-80 transition-all rounded-lg cursor-pointer" uk-toggle="target: #create-post">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6 fill-sky-600">
                                <path fill-rule="evenodd" d="M1.5 6a2.25 2.25 0 012.25-2.25h16.5A2.25 2.25 0 0122.5 6v12a2.25 2.25 0 01-2.25 2.25H3.75A2.25 2.25 0 011.5 18V6zM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0021 18v-1.94l-2.69-2.689a1.5 1.5 0 00-2.12 0l-.88.879.97.97a.75.75 0 11-1.06 1.06l-5.16-5.159a1.5 1.5 0 00-2.12 0L3 16.061zm10.125-7.81a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0z" clip-rule="evenodd" />
                            </svg>
                        </div>
                        
                        <div class="p-2 bg-pink-100 hover:bg-opacity-80 transition-all rounded-lg cursor-pointer" uk-toggle="target: #create-post">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 fill-pink-600">
                                <path d="M3.25 4A2.25 2.25 0 001 6.25v7.5A2.25 2.25 0 003.25 16h7.5A2.25 2.25 0 0013 13.75v-7.5A2.25 2.25 0 0010.75 4h-7.5zM19 4.75a.75.75 0 00-1.28-.53l-3 3a.75.75 0 00-.22.53v4.5c0 .199.079.39.22.53l3 3a.75.75 0 001.28-.53V4.75z" />
                            </svg>
                        </div>
                    </div>
                </div>
                @foreach (var codeSnippet in Model.CodeSnippetList)
                {
                    <!--  post image-->
                    <div class="bg-white rounded-xl shadow-sm text-sm font-medium border1 dark:bg-dark2">

                        <!-- post heading -->
                        <div class="flex gap-3 sm:p-4 p-2.5 text-sm font-medium">
                            <a asp-controller="Home" asp-action="Profile">
                                @if (string.IsNullOrEmpty(codeSnippet.User.ProfileImage))
                                {
                                    <img src="../images/default-coder-profile.jpg" alt="" class="w-9 h-9 rounded-full">
                                }
                                else
                                {
                                    <img src="@codeSnippet.User.ProfileImage" alt="" class="w-9 h-9 rounded-full">
                                }
                            </a>
                            <div class="flex-1">
                                <a asp-controller="Home" asp-action="Profile"> <h4 class="text-black dark:text-white"> @codeSnippet.User.UserName </h4> </a>
                                @functions {
                                string GetTimeAgoString(TimeSpan timeDifference)
                                {
                                    if (timeDifference.TotalSeconds < 60)
                                    {
                                        return $"{(int)timeDifference.TotalSeconds} seconds ago";
                                    }
                                    else if (timeDifference.TotalMinutes < 60)
                                    {
                                        return $"{(int)timeDifference.TotalMinutes} minutes ago";
                                    }
                                    else if (timeDifference.TotalHours < 24)
                                    {
                                        return $"{(int)timeDifference.TotalHours} hours ago";
                                    }
                                    else
                                    {
                                        return $"{(int)timeDifference.TotalDays} days ago";
                                    }
                                }
                            }
                            @{
                                    TimeSpan timeDifference = DateTime.Now - codeSnippet.CreatedAt;
                                    string timeAgo = GetTimeAgoString(timeDifference);
                                }

                                <div class="text-xs text-gray-500 dark:text-white/80">@timeAgo</div>
                            </div>

                            <div class="-mr-1">
                                <button type="button" class="button__ico w-8 h-8"> <ion-icon class="text-xl" name="ellipsis-horizontal"></ion-icon> </button>
                                <div class="w-[245px]" uk-dropdown="pos: bottom-right; animation: uk-animation-scale-up uk-transform-origin-top-right; animate-out: true; mode: click">
                                    <nav>
                                        <a href="#"> <ion-icon class="text-xl shrink-0" name="bookmark-outline"></ion-icon>  Add to favorites </a>
                                        <a href="#"> <ion-icon class="text-xl shrink-0" name="notifications-off-outline"></ion-icon> Mute Notification </a>
                                        <a href="#"> <ion-icon class="text-xl shrink-0" name="flag-outline"></ion-icon>  Report this post </a>
                                        <a href="#"> <ion-icon class="text-xl shrink-0" name="share-outline"></ion-icon>  Share your profile </a>
                                        <hr>
                                        <a href="#" class="text-red-400 hover:!bg-red-50 dark:hover:!bg-red-500/50"> <ion-icon class="text-xl shrink-0" name="stop-circle-outline"></ion-icon>  Unfollow </a>
                                    </nav>
                                </div>
                            </div>
                        </div>

                        <!-- post image -->
                        <div class="relative w-full lg:h-72 h-full sm:px-4">
                            @if (!string.IsNullOrEmpty(codeSnippet.MediaPath))
                            {
                                var extension = System.IO.Path.GetExtension(codeSnippet.MediaPath);
                                if (extension.Equals(".mp4", StringComparison.OrdinalIgnoreCase) || extension.Equals(".avi", StringComparison.OrdinalIgnoreCase))
                                {
                                    <video controls style="width:100%;height:100%">
                                        <source src="@codeSnippet.MediaPath" type="video/mp4">
                                        Your browser does not support the video tag.
                                    </video>
                                }
                                else if (extension.Equals(".jpg", StringComparison.OrdinalIgnoreCase) || extension.Equals(".png", StringComparison.OrdinalIgnoreCase) || extension.Equals(".jpeg", StringComparison.OrdinalIgnoreCase))
                                {
                                    <img src="@codeSnippet.MediaPath" alt="Image" class="sm:rounded-lg w-full h-full object-cover">
                                }
                                else
                                {
                                    <p>Unsupported file type</p>
                                }
                            }
                            else
                            {
                                <p>No file path available</p>
                            }
                        </div>

                        <!-- post icons -->
                        <div class="sm:p-4 p-2.5 flex items-center gap-4 text-xs font-semibold">
                            <div class="flex items-center gap-2.5">
                                <button type="button" class="button__ico text-red-500 bg-red-100 dark:bg-slate-700"> <i class="bi bi-heart-fill"></i> </button>
                                <a href="#">1,380</a>
                            </div>
                            <div class="flex items-center gap-3">
                                <button type="button" class="button__ico bg-slate-200/70 dark:bg-slate-700"> <ion-icon class="text-lg" name="chatbubble-ellipses"></ion-icon> </button>
                                <span>260</span>
                            </div>
                            <button type="button" class="button__ico ml-auto"> <ion-icon class="text-xl" name="paper-plane-outline"></ion-icon> </button>
                            <button type="button" class="button__ico"> <ion-icon class="text-xl" name="share-outline"></ion-icon> </button>
                        </div>

                        <!-- comments -->
                        <div class="sm:p-4 p-2.5 border-t border-gray-100 font-normal space-y-3 relative dark:border-slate-700/40">
                            @foreach (var comment in Model.CommentList.Where(c => c.CodeSnippetId == codeSnippet.CodeSnippetId))
                            {
                                <div class="flex items-start gap-3 relative">
                                    <a asp-controller="Home" asp-action="Profile" asp-route-id="@comment.User.Id">
                                        @if (string.IsNullOrEmpty(comment.User.ProfileImage))
                                        {
                                            <img src="../images/default-coder-profile.jpg" alt="" class="w-6 h-6 mt-1 rounded-full">
                                        }
                                        else
                                        {
                                            <img src="@comment.User.ProfileImage" alt="" class="w-6 h-6 mt-1 rounded-full">
                                        }
                                        </a>
                                    <div class="flex-1">
                                        <a asp-controller="Home" asp-action="Profile" asp-route-id="@comment.User.Id" class="text-black font-medium inline-block dark:text-white"> @comment.User.UserName </a>
                                        <p class="mt-0.5">@comment.Content</p>
                                    </div>
                                </div>
                            }

                            <button type="button" class="flex items-center gap-1.5 text-gray-500 hover:text-blue-500 mt-2">
                                <ion-icon name="chevron-down-outline" class="ml-auto duration-200 group-aria-expanded:rotate-180"></ion-icon>
                                More Comment
                            </button>

                        </div>

                        <!-- add comment -->
                        <form method="post" asp-action="AddComment" asp-controller="UserAction">
                            <div class="sm:px-4 sm:py-3 p-2.5 border-t border-gray-100 flex items-center gap-1 dark:border-slate-700/40">

                                @await Html.PartialAsync("_UserProfileImage", await UserManager.GetUserAsync(User))

                                <div class="flex-1 relative overflow-hidden h-50">
                                    <input asp-for="@Model.Comment.CodeSnippetId" value="@codeSnippet.CodeSnippetId" hidden />

                                    <input asp-for="@Model.Comment.Content" placeholder="Add Comment...." class="w-full resize-none !bg-transparent px-4 py-2 focus:!border-transparent focus:!ring-transparent" />
                                    <span asp-validation-for="@Model.Comment.Content" class="text-danger"></span>
                                    <div class="!top-2 pr-2" uk-drop="pos: bottom-right; mode: click">
                                        <div class="flex items-center gap-2" uk-scrollspy="target: > svg; cls: uk-animation-slide-right-small; delay: 100 ;repeat: true">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6 fill-sky-600">
                                                <path fill-rule="evenodd" d="M1.5 6a2.25 2.25 0 012.25-2.25h16.5A2.25 2.25 0 0122.5 6v12a2.25 2.25 0 01-2.25 2.25H3.75A2.25 2.25 0 011.5 18V6zM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0021 18v-1.94l-2.69-2.689a1.5 1.5 0 00-2.12 0l-.88.879.97.97a.75.75 0 11-1.06 1.06l-5.16-5.159a1.5 1.5 0 00-2.12 0L3 16.061zm10.125-7.81a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0z" clip-rule="evenodd" />
                                            </svg>
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 fill-pink-600">
                                                <path d="M3.25 4A2.25 2.25 0 001 6.25v7.5A2.25 2.25 0 003.25 16h7.5A2.25 2.25 0 0013 13.75v-7.5A2.25 2.25 0 0010.75 4h-7.5zM19 4.75a.75.75 0 00-1.28-.53l-3 3a.75.75 0 00-.22.53v4.5c0 .199.079.39.22.53l3 3a.75.75 0 001.28-.53V4.75z" />
                                            </svg>
                                        </div>
                                    </div>
                                </div>

                                <button type="submit" class="text-sm rounded-full py-1.5 px-3.5 bg-secondery"> Replay</button>
                            </div>
                        </form>

                    </div>
                }
                <!-- placeholder -->
                <div class="rounded-xl shadow-sm p-4 space-y-4 bg-slate-200/40 animate-pulse border1 dark:bg-dark2">

                    <div class="flex gap-3">
                        <div class="w-9 h-9 rounded-full bg-slate-300/20"></div>
                        <div class="flex-1 space-y-3">
                            <div class="w-40 h-5 rounded-md bg-slate-300/20"></div>
                            <div class="w-24 h-4 rounded-md bg-slate-300/20"></div>
                        </div>
                        <div class="w-6 h-6 rounded-full bg-slate-300/20"></div>
                    </div>

                    <div class="w-full h-52 rounded-lg bg-slate-300/10 my-3"> </div>

                    <div class="flex gap-3">

                        <div class="w-16 h-5 rounded-md bg-slate-300/20"></div>

                        <div class="w-14 h-5 rounded-md bg-slate-300/20"></div>

                        <div class="w-6 h-6 rounded-full bg-slate-300/20 ml-auto"></div>
                        <div class="w-6 h-6 rounded-full bg-slate-300/20  "></div>
                    </div>

                </div>

            </div>


            <!-- right sidebar -->

            <div class="lg:max-w-[370px] md:max-w-[510px] mx-auto">

                <div class="xl:space-y-6 space-y-3 md:pb-12" uk-sticky="end: #js-oversized; offset: 50; media:992">

                    <!-- peaple you might know -->
                    <div class="bg-white rounded-xl shadow-sm p-5 px-6 border1 dark:bg-dark2">

                        <div class="flex justify-between text-black dark:text-white">
                            <h3 class="font-bold text-base"> Peaple You might know </h3>
                            <button type="button"> <ion-icon name="sync-outline" class="text-xl"></ion-icon> </button>
                        </div>

                        <div class="space-y-4 capitalize text-xs font-normal mt-5 mb-2 text-gray-500 dark:text-white/80">
                            @foreach (var user in Model.UserList)
                            {
                                <div class="flex items-center gap-3">
                                    <a asp-controller="Home" asp-action="Profile" asp-route-id="@user.Id">
                                        @if (string.IsNullOrEmpty(user.ProfileImage))
                                        {
                                            <img src="../images/default-coder-profile.jpg" alt="" class="bg-gray-200 rounded-full w-10 h-10">
                                        }
                                        else
                                        {
                                            <img src="@user.ProfileImage" alt="" class="bg-gray-200 rounded-full w-10 h-10">
                                        }
                                    </a>
                                    <div class="flex-1">
                                        <a asp-controller="Home" asp-action="Profile" asp-route-id="@user.Id"><h4 class="font-semibold text-sm text-black dark:text-white">@user.FullName</h4></a>
                                        <div class="mt-0.5"> Suggested For You </div>
                                    </div>
                                    <button type="button" class="text-sm rounded-full py-1.5 px-4 font-semibold bg-secondery"> Follow </button>
                                </div>
                            }
                        </div>
                    </div>


                    <!-- latest marketplace items -->
                    <div class="bg-white rounded-xl shadow-sm p-5 px-6 border1 dark:bg-dark2">

                        <div class="flex justify-between text-black dark:text-white">
                            <h3 class="font-bold text-base"> Premium Photos </h3>
                            <button type="button"> <ion-icon name="sync-outline" class="text-xl"></ion-icon> </button>
                        </div>

                        <div class="relative capitalize font-medium text-sm text-center mt-4 mb-2" tabindex="-1" uk-slider="autoplay: true;finite: true">

                            <div class="overflow-hidden uk-slider-container">

                                <ul class="-ml-2 uk-slider-items w-[calc(100%+0.5rem)]">

                                    @foreach (var post in Model.CodeSnippetList)
                                    {
                                        <li class="w-1/2 pr-2">

                                            <a href="#">
                                                <div class="relative overflow-hidden rounded-lg">
                                                    <div class="relative w-full md:h-40 h-full">
                                                        @if (!string.IsNullOrEmpty(post.MediaPath))
                                                        {
                                                            var extension = System.IO.Path.GetExtension(post.MediaPath);
                                                            if (extension.Equals(".mp4", StringComparison.OrdinalIgnoreCase) || extension.Equals(".avi", StringComparison.OrdinalIgnoreCase))
                                                            {
                                                                <video autoplay loop muted style="width:100%;height:100%" class="object-cover w-full h-full inset-0">
                                                                    <source src="@post.MediaPath" type="video/mp4">
                                                                    Your browser does not support the video tag.
                                                                </video>
                                                            }
                                                            else if (extension.Equals(".jpg", StringComparison.OrdinalIgnoreCase) || extension.Equals(".png", StringComparison.OrdinalIgnoreCase) || extension.Equals(".jpeg", StringComparison.OrdinalIgnoreCase))
                                                            {
                                                                <img src="@post.MediaPath" alt="Image" class="object-cover w-full h-full inset-0">
                                                            }
                                                            else
                                                            {
                                                                <p>Unsupported file type</p>
                                                            }
                                                        }
                                                        else
                                                        {
                                                            <p>No file path available</p>
                                                        }
                                                    </div>
                                                    <div class="absolute right-0 top-0 m-2 bg-white/60 rounded-full py-0.5 px-2 text-sm font-semibold dark:bg-slate-800/60"> $18 </div>
                                                </div>
                                                <div class="mt-3 w-full"> @post.User.UserName </div>
                                            </a>
                                            
                                        </li>
                                    }

                                </ul>

                                <button type="button" class="absolute bg-white rounded-full top-16 -left-4 grid w-9 h-9 place-items-center shadow dark:bg-dark3" uk-slider-item="previous"> <ion-icon name="chevron-back" class="text-2xl"></ion-icon></button>
                                <button type="button" class="absolute -right-4 bg-white rounded-full top-16 grid w-9 h-9 place-items-center shadow dark:bg-dark3" uk-slider-item="next"> <ion-icon name="chevron-forward" class="text-2xl"></ion-icon></button>

                            </div>

                        </div>


                    </div>


                    <!-- online friends -->
                    <div class="bg-white rounded-xl shadow-sm p-5 px-6 border1 dark:bg-dark2">

                        <div class="flex justify-between text-black dark:text-white">
                            <h3 class="font-bold text-base"> Online Friends </h3>
                            <button type="button"> <ion-icon name="sync-outline" class="text-xl"></ion-icon> </button>
                        </div>

                        <div class="grid grid-cols-6 gap-3 mt-4">
                            @foreach (var activeUser in Model.UserList)
                            {
                                <a asp-controller="Home" asp-action="Profile" asp-route-id="@activeUser.Id">
                                    <div class="w-10 h-10 relative">
                                        <img src="@activeUser.ProfileImage" alt="" class="w-full h-full absolute inset-0 rounded-full">
                                        <div class="absolute bottom-0 right-0 m-0.5 bg-green-500 rounded-full w-2 h-2"></div>
                                    </div>
                                </a>
                            }
                        </div>


                    </div>


                    <!-- Pro Members -->
                    <div class="bg-white rounded-xl shadow-sm p-5 px-6 border1 dark:bg-dark2">

                        <div class="flex justify-between text-black dark:text-white">
                            <h3 class="font-bold text-base"> Pro Members </h3>
                        </div>

                        <div class="relative capitalize font-normal text-sm mt-4 mb-2" tabindex="-1" uk-slider="autoplay: true;finite: true">

                            <div class="overflow-hidden uk-slider-container">

                                <ul class="-ml-2 uk-slider-items w-[calc(100%+0.5rem)]">

                                    <li class="w-1/2 pr-2">
                                        <a asp-controller="Home" asp-action="Profile">
                                            <div class="flex flex-col items-center shadow-sm p-2 rounded-xl border1">
                                                <a asp-controller="Home" asp-action="Profile">
                                                    <div class="relative w-16 h-16 mx-auto mt-2">
                                                        <img src="~/assets/images/avatars/avatar-5.jpg" alt="" class="h-full object-cover rounded-full shadow w-full">
                                                    </div>
                                                </a>
                                                <div class="mt-5 text-center w-full">
                                                    <a asp-controller="Home" asp-action="Profile"> <h5 class="font-semibold"> Martin Gray</h5> </a>
                                                    <div class="text-xs text-gray-400 mt-0.5 font-medium"> 12K Followers</div>
                                                    <button type="button" class="bg-secondery block font-semibold mt-4 py-1.5 rounded-lg text-sm w-full border1"> Follow </button>
                                                </div>
                                            </div>
                                        </a>
                                    </li>

                                </ul>

                                <button type="button" class="absolute -translate-y-1/2 bg-slate-100 rounded-full top-1/2 -left-4 grid w-9 h-9 place-items-center dark:bg-dark3" uk-slider-item="previous"> <ion-icon name="chevron-back" class="text-2xl"></ion-icon></button>
                                <button type="button" class="absolute -right-4 -translate-y-1/2 bg-slate-100 rounded-full top-1/2 grid w-9 h-9 place-items-center dark:bg-dark3" uk-slider-item="next"> <ion-icon name="chevron-forward" class="text-2xl"></ion-icon></button>

                            </div>

                        </div>


                    </div>


                    <!-- Trends -->
                    <div class="bg-white rounded-xl shadow-sm p-5 px-6 border1 dark:bg-dark2">

                        <div class="flex justify-between text-black dark:text-white">
                            <h3 class="font-bold text-base"> Trends for you </h3>
                            <button type="button"> <ion-icon name="sync-outline" class="text-xl"></ion-icon> </button>
                        </div>

                        <div class="space-y-3.5 capitalize text-xs font-normal mt-5 mb-2 text-gray-600 dark:text-white/80">
                            <a href="#">
                                <div class="flex items-center gap-3 p">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 -mt-2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M5.25 8.25h15m-16.5 7.5h15m-1.8-13.5l-3.9 19.5m-2.1-19.5l-3.9 19.5" />
                                    </svg>
                                    <div class="flex-1">
                                        <h4 class="font-semibold text-black dark:text-white text-sm">  artificial intelligence </h4>
                                        <div class="mt-0.5"> 1,245,62 post </div>
                                    </div>
                                </div>
                            </a>
                            <a href="#" class="block">
                                <div class="flex items-center gap-3">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 -mt-2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M5.25 8.25h15m-16.5 7.5h15m-1.8-13.5l-3.9 19.5m-2.1-19.5l-3.9 19.5" />
                                    </svg>
                                    <div class="flex-1">
                                        <h4 class="font-semibold text-black dark:text-white text-sm">  Web developers</h4>
                                        <div class="mt-0.5"> 1,624 post </div>
                                    </div>
                                </div>
                            </a>
                            <a href="#" class="block">
                                <div class="flex items-center gap-3">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 -mt-2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M5.25 8.25h15m-16.5 7.5h15m-1.8-13.5l-3.9 19.5m-2.1-19.5l-3.9 19.5" />
                                    </svg>
                                    <div class="flex-1">
                                        <h4 class="font-semibold text-black dark:text-white text-sm">  Ui Designers</h4>
                                        <div class="mt-0.5"> 820 post </div>
                                    </div>
                                </div>
                            </a>
                            <a href="#" class="block">
                                <div class="flex items-center gap-3">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 -mt-2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M5.25 8.25h15m-16.5 7.5h15m-1.8-13.5l-3.9 19.5m-2.1-19.5l-3.9 19.5" />
                                    </svg>
                                    <div class="flex-1">
                                        <h4 class="font-semibold text-black dark:text-white text-sm"> affiliate marketing </h4>
                                        <div class="mt-0.5"> 480 post </div>
                                    </div>
                                </div>
                            </a>
                        </div>


                    </div>

                </div>

            </div>


        </div>

    </div>

</main>